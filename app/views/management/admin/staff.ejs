<div class="page-header-block">
    <div class="header-left">
        <h2 class="page-title">Quản lý Nhân sự</h2>
    </div>
    <div class="header-right">
        <div class="dropdown-group" style="position: relative;">
            <button class="btn-primary-add dropdown-toggle" onclick="window.staffManager.toggleDropdown(event)" type="button">
                <i class="fa-solid fa-plus"></i> Thêm mới <i class="fa-solid fa-caret-down"></i>
            </button>
            <div id="addDropdown" class="dropdown-menu" style="display: none;">
                <a href="javascript:void(0)" onclick="window.staffManager.openModal('assistant', 'add'); return false;">
                    <i class="fa-solid fa-user-gear"></i> Trợ lý khoa
                </a>
                <a href="javascript:void(0)" onclick="window.staffManager.openModal('lecturer', 'add'); return false;">
                    <i class="fa-solid fa-chalkboard-user"></i> Giảng viên
                </a>
            </div>
        </div>
    </div>
</div>

<div class="main-card filter-card">
    <div class="filter-row">
        <div class="filter-item flex-grow-1">
            <label>Tìm kiếm chung</label>
            <div class="search-wrapper" style="position: relative;">
                <input type="text" id="globalSearch" class="form-control" placeholder="Tên, mã số, email...">
                <button id="clearSearchBtn" title="Xóa" type="button"
                    style="display: none; position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: transparent; border: none; color: #666; font-size: 16px; cursor: pointer;">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
        </div>
        <div class="filter-item">
            <label>Trạng thái</label>
            <select id="staffStatusFilter" class="form-control">
                <option value="" selected>Tất cả trạng thái</option>
                <option value="true">Hoạt động</option>
                <option value="false">Không hoạt động</option>
            </select>
        </div>
        <div class="filter-item">
            <button onclick="window.staffManager.performSearch()" class="btn-search" type="button">
                <i class="fa-solid fa-search"></i> Tìm kiếm
            </button>
        </div>
    </div>
</div>

<div class="staff-tabs mt-20">
    <button id="lecturerTab" class="tab-btn active" onclick="window.staffManager.switchTab('lecturer')" type="button">
        Giảng viên (<span id="totalLecturers">0</span>)
    </button>
    <button id="assistantTab" class="tab-btn" onclick="window.staffManager.switchTab('assistant')" type="button">
        Trợ lý khoa (<span id="totalAssistants">0</span>)
    </button>
</div>

<div class="tab-content-container">

    <div id="tab-assistant" class="tab-pane" style="display: none;">
        <div class="main-card no-top-border">
            <div class="table-responsive">
                <table class="custom-table">
                    <thead>
                        <tr>
                            <th style="width: 50px;">STT</th>
                            <th style="width: 200px;">Họ và tên</th>
                            <th style="width: 100px;">Mã trợ lý</th>
                            <th>Email</th>
                            <th style="width: 80px;">Số điện thoại</th>
                            <th style="width: 50px;">Giới tính</th>
                            <th style="width: 200px;">Khoa</th>
                            <th style="width: 80px;">Học hàm</th>
                            <th style="width: 80px;">Bằng cấp</th>
                            <th style="width: 100px;">Phòng làm việc</th>
                            <th style="width: 150px;">Trạng thái</th>
                            <th class="text-center">Hành động</th>
                        </tr>
                    </thead>
                    <tbody id="assistantTableBody">
                        <tr><td colspan="11" class="text-center">Đang tải dữ liệu...</td></tr>
                    </tbody>
                </table>
            </div>
            <div class="pagination-wrapper" id="pagination-assistant"></div>
        </div>
    </div>

    <div id="tab-lecturer" class="tab-pane active">
        <div class="main-card no-top-border">
            <div class="table-responsive">
                <table class="custom-table">
                    <thead>
                        <tr>
                            <th style="width: 50px;">STT</th>
                            <th style="width: 200px;">Họ và tên</th>
                            <th style="width: 100px;">Mã giảng viên</th>
                            <th>Email</th>
                            <th style="width: 80px;">Số điện thoại</th>
                            <th style="width: 50px;">Giới tính</th>
                            <th style="width: 200px;">Khoa</th>
                            <th style="width: 80px;">Học hàm</th>
                            <th style="width: 80px;">Bằng cấp</th>
                            <th style="width: 100px;">Phòng làm việc</th>
                            <th style="width: 150px;">Trạng thái</th>
                            <th class="text-center">Hành động</th>
                        </tr>
                    </thead>
                    <tbody id="lecturerTableBody">
                        <tr><td colspan="12" class="text-center">Đang tải dữ liệu...</td></tr>
                    </tbody>
                </table>
            </div>
            <div class="pagination-wrapper" id="pagination-lecturer"></div>
        </div>
    </div>
</div>

<!-- MODAL LECTURER -->
<div id="lecturerModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <span class="close-modal-btn" onclick="window.staffManager.closeModal('lecturer')">&times;</span>
        <h3 id="lec_modalTitle" class="modal-title">Thêm mới giảng viên</h3>
        <form id="lecturerForm">
            <div class="form-grid-layout">
                <!-- COLUMN 1: User Info -->
                <div class="form-col">
                    <h4 style="margin-bottom: 15px; color: #0d6efd;">Thông tin tài khoản</h4>
                    
                    <div class="form-group">
                        <label>Tên đăng nhập <span class="text-red">*</span></label>
                        <input type="text" name="username" id="lec_username" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Mật khẩu <span class="text-red" id="lec_passwordRequired">*</span></label>
                        <input type="password" name="password" id="lec_password" class="form-control" placeholder="Tối thiểu 8 ký tự">
                        <small style="color: #666;">Để trống nếu không muốn đổi (khi cập nhật)</small>
                    </div>
                    
                    <div class="form-group">
                        <label>Họ <span class="text-red">*</span></label>
                        <input type="text" name="last_name" id="lec_last_name" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Tên <span class="text-red">*</span></label>
                        <input type="text" name="first_name" id="lec_first_name" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Email <span class="text-red">*</span></label>
                        <input type="email" name="email" id="lec_email" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Số điện thoại</label>
                        <input type="tel" name="phone" id="lec_phone" class="form-control" placeholder="0123456789">
                    </div>
                    
                    <div class="form-group">
                        <label>Ngày sinh</label>
                        <input type="date" name="date_of_birth" id="lec_date_of_birth" class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label>Giới tính</label>
                        <select name="gender" id="lec_gender" class="form-control">
                            <option value="male">Nam</option>
                            <option value="female">Nữ</option>
                            <option value="other">Khác</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Địa chỉ</label>
                        <input type="text" name="address" id="lec_address" class="form-control" placeholder="Địa chỉ">
                    </div>
                </div>
                
                <!-- COLUMN 2: Lecturer Specific Info -->
                <div class="form-col">
                    <h4 style="margin-bottom: 15px; color: #0d6efd;">Thông tin giảng viên</h4>
                    
                    <div class="form-group">
                        <label>Mã giảng viên <span class="text-red">*</span></label>
                        <input type="text" name="lecturer_code" id="lec_lecturer_code" class="form-control" placeholder="VD: GV001" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Khoa <span class="text-red">*</span></label>
                        <select name="department_id" id="lec_department_id" class="form-control" required>
                            <option value="">-- Chọn khoa --</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Học hàm</label>
                        <select name="academic_rank" id="lec_academic_rank" class="form-control">
                            <option value="">-- Chọn học hàm --</option>
                            <option value="Phó Giáo sư">Phó Giáo sư</option>
                            <option value="Giáo sư">Giáo sư</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Bằng cấp</label>
                        <select name="degree" id="lec_degree" class="form-control">
                            <option value="">-- Chọn bằng cấp --</option>
                            <option value="Cử nhân">Cử nhân</option>
                            <option value="Kỹ sư">Kỹ sư</option>
                            <option value="Thạc sĩ">Thạc sĩ</option>
                            <option value="Tiến sĩ">Tiến sĩ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Phòng làm việc</label>
                        <input type="text" name="office_room" id="lec_office_room" class="form-control" placeholder="VD: P301">
                    </div>
                    
                    <div class="form-group">
                        <label>Giờ làm việc</label>
                        <input type="text" name="office_hours" id="lec_office_hours" class="form-control" placeholder="VD: T2-T6: 8h-17h">
                    </div>
                    
                    <div class="form-group">
                        <label>Tiểu sử</label>
                        <textarea name="bio" id="lec_bio" class="form-control" rows="3" placeholder="Mô tả ngắn về giảng viên..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Trạng thái</label>
                        <select name="is_active" id="lec_is_active" class="form-control">
                            <option value="true">Đang hoạt động</option>
                            <option value="false">Ngừng hoạt động</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="modal-actions-footer">
                <button type="button" onclick="window.staffManager.closeModal('lecturer')" class="btn-cancel">
                    <i class="fa-solid fa-times"></i> Hủy
                </button>
                <button type="submit" class="btn-save">
                    <i class="fa-solid fa-save"></i> Lưu lại
                </button>
            </div>
        </form>
    </div>
</div>

<!-- MODAL ASSISTANT -->
<div id="assistantModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <span class="close-modal-btn" onclick="window.staffManager.closeModal('assistant')">&times;</span>
        <h3 id="asst_modalTitle" class="modal-title">Thêm mới trợ lý</h3>
        <form id="assistantForm">
            <div class="form-grid-layout">
                <!-- COLUMN 1: User Info -->
                <div class="form-col">
                    <h4 style="margin-bottom: 15px; color: #0d6efd;">Thông tin tài khoản</h4>
                    
                    <div class="form-group">
                        <label>Tên đăng nhập <span class="text-red">*</span></label>
                        <input type="text" name="username" id="asst_username" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Mật khẩu <span class="text-red" id="asst_passwordRequired">*</span></label>
                        <input type="password" name="password" id="asst_password" class="form-control" placeholder="Tối thiểu 8 ký tự">
                        <small style="color: #666;">Để trống nếu không muốn đổi (khi cập nhật)</small>
                    </div>
                    
                    <div class="form-group">
                        <label>Họ <span class="text-red">*</span></label>
                        <input type="text" name="last_name" id="asst_last_name" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Tên <span class="text-red">*</span></label>
                        <input type="text" name="first_name" id="asst_first_name" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Email <span class="text-red">*</span></label>
                        <input type="email" name="email" id="asst_email" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Số điện thoại</label>
                        <input type="tel" name="phone" id="asst_phone" class="form-control" placeholder="0123456789">
                    </div>
                    
                    <div class="form-group">
                        <label>Ngày sinh</label>
                        <input type="date" name="date_of_birth" id="asst_date_of_birth" class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label>Giới tính</label>
                        <select name="gender" id="asst_gender" class="form-control">
                            <option value="male">Nam</option>
                            <option value="female">Nữ</option>
                            <option value="other">Khác</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Địa chỉ</label>
                        <input type="text" name="address" id="asst_address" class="form-control" placeholder="Số nhà, đường, phường, quận...">
                    </div>
                </div>
                
                <!-- COLUMN 2: Assistant Specific Info -->
                <div class="form-col">
                    <h4 style="margin-bottom: 15px; color: #0d6efd;">Thông tin trợ lý</h4>
                    
                    <div class="form-group">
                        <label>Mã trợ lý <span class="text-red">*</span></label>
                        <input type="text" name="assistant_code" id="asst_assistant_code" class="form-control" placeholder="VD: TL001" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Khoa <span class="text-red">*</span></label>
                        <select name="department_id" id="asst_department_id" class="form-control" required>
                            <option value="">-- Chọn khoa --</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Học hàm</label>
                        <select name="academic_rank" id="asst_academic_rank" class="form-control">
                            <option value="">-- Chọn học hàm --</option>
                            <option value="Phó Giáo sư">Phó Giáo sư</option>
                            <option value="Giáo sư">Giáo sư</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Bằng cấp</label>
                        <select name="degree" id="asst_degree" class="form-control">
                            <option value="">-- Chọn bằng cấp --</option>
                            <option value="Cử nhân">Cử nhân</option>
                            <option value="Kỹ sư">Kỹ sư</option>
                            <option value="Thạc sĩ">Thạc sĩ</option>
                            <option value="Tiến sĩ">Tiến sĩ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Phòng làm việc</label>
                        <input type="text" name="office_room" id="asst_office_room" class="form-control" placeholder="VD: P201">
                    </div>
                    
                    <div class="form-group">
                        <label>Giờ làm việc</label>
                        <input type="text" name="office_hours" id="asst_office_hours" class="form-control" placeholder="VD: T2-T6: 8h-17h">
                    </div>
                    
                    <div class="form-group">
                        <label>Tiểu sử</label>
                        <textarea name="bio" id="asst_bio" class="form-control" rows="3" placeholder="Mô tả ngắn về trợ lý..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Trạng thái</label>
                        <select name="is_active" id="asst_is_active" class="form-control">
                            <option value="true">Đang hoạt động</option>
                            <option value="false">Ngừng hoạt động</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="modal-actions-footer">
                <button type="button" onclick="window.staffManager.closeModal('assistant')" class="btn-cancel">
                    <i class="fa-solid fa-times"></i> Hủy
                </button>
                <button type="submit" class="btn-save">
                    <i class="fa-solid fa-save"></i> Lưu lại
                </button>
            </div>
        </form>
    </div>
</div>
<script type="module" src="/js/modules/admin/staff/main.js"></script>